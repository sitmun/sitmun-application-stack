###############################################################################
# Dockerized PostgreSQL with Minimal Seed - PRODUCTION MODE
#
# This profile is designed for PRODUCTION deployments with:
#   - Frontend: ENVIRONMENT=production (optimized build, shows "production" in UI)
#   - Backend: SPRING_PROFILES_ACTIVE=prod (production logging and behavior)
#   - Minimal seed data for production use
#
# WARNING: This profile is NOT for local development. For development, use:
#          profiles/development-postgres.env
#
# Usage:
#   1. cp profiles/postgres.env .env
#   2. Edit .env to adjust settings as needed (especially MIDDLEWARE_SECRET!)
#   3. docker compose up -d
###############################################################################

COMPOSE_PROFILES=postgres

# --- Base URL ---
# PUBLIC_URL_SCHEME=http
# PUBLIC_HOSTNAME=localhost
PUBLIC_PORT=9000
PUBLIC_NON_STANDARD_PORT=1
# PUBLIC_BASE_PATH=/

# --- Container ---
# LOCAL_PORT=9000
# LOCAL_BASE_PATH=/
# Frontend environment: 'production' enables Angular production optimizations
# (minification, tree-shaking, no source maps) and shows "production" in the UI.
ENVIRONMENT=production
# APP_VERSION controls the version shown in Admin/Viewer About dialog (Docker builds)
APP_VERSION=1.2.2

# --- Database ---
SITMUN_CONFIG_DIR=postgres
DATABASE_TYPE=postgres
DATABASE_URL=jdbc:postgresql://postgres:5432/
# DATABASE=sitmun3
# DATABASE_USERNAME=sitmun3
# DATABASE_PASSWORD=sitmun3

# --- Hibernate ---
# Dialect loaded from application-postgres.yml via 'postgres' profile
# DDL mode set to 'validate' - catches schema mismatches at startup
SPRING_JPA_HIBERNATE_DDL_AUTO=validate

# --- Liquibase (minimal seed) ---
SPRING_LIQUIBASE_CHANGE_LOG=file:/usr/src/config/liquibase/master.xml
SPRING_LIQUIBASE_CONTEXTS=

# --- Proxy ---
# FORCE_USE_OF_PROXY=true

# --- Security ---
# MIDDLEWARE_SECRET=your-secure-secret-here

# --- Production Mode ---
# Backend Spring profile: 'prod,postgres' enables production behavior with PostgreSQL-specific settings
# The 'postgres' profile loads application-postgres.yml (dialect)
# Combined with logging levels below, ensures production-ready operation
SPRING_PROFILES_ACTIVE=prod,postgres
LOGGING_LEVEL_ROOT=WARN
LOGGING_LEVEL_ORG_SITMUN=INFO
